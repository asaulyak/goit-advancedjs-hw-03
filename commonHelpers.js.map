{"version":3,"file":"commonHelpers.js","sources":["../src/cat-api.js","../src/index.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.headers.common['x-api-key'] =\n  'live_LtgdoXVJ2ceIttAbsWuiz90kH1DvEAu1OgZmbObUcd0nH2MKYoueFgP7AS9qe6kN';\n\nconst CATS_API_BASE_URL = 'https://api.thecatapi.com/v1';\n\nexport function fetchBreeds() {\n  return axios(`${CATS_API_BASE_URL}/breeds`).then(response => response.data);\n}\n\nexport function fetchCatByBreed(breedId) {\n  return axios(`${CATS_API_BASE_URL}/images/search?breed_ids=${breedId}`)\n    .then(response => response.data)\n    .then(response => {\n      const [item] = response;\n\n      if (!item) {\n        throw new Error(`Breed ${breedId} not found`);\n      }\n\n      const { url } = item;\n\n      const [breed] = item?.breeds || [];\n\n      if (!breed) {\n        throw new Error(`Breed ${breedId} not found`);\n      }\n\n      return { ...breed, url };\n    });\n}\n","import { fetchBreeds, fetchCatByBreed } from './cat-api.js';\n// Описаний в документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SlimSelect from 'slim-select';\n\nfunction start() {\n  fillBreeds();\n}\n\nfunction getElement(selector) {\n  const element = document.querySelector(selector);\n\n  if (!element) {\n    throw new Error(`Element ${selector} select not found`);\n  }\n\n  return element;\n}\n\nfunction createSelect(data) {\n  new SlimSelect({\n    select: '.breed-select',\n    data,\n    events: {\n      afterChange: ([breed]) => {\n        fillCatInfo(breed.value);\n      },\n    },\n  });\n}\n\nfunction getSelectElement() {\n  return getElement('.select-wrapper');\n}\n\nfunction getLoaderElement() {\n  return getElement('.loader');\n}\n\nfunction getInfoElement() {\n  return getElement('.cat-info');\n}\n\nasync function fillBreeds() {\n  showLoader();\n  showSelect(false);\n\n  const breeds = await fetchBreeds().catch(() => {\n    showError();\n    showLoader(false);\n  });\n\n  createSelect(\n    breeds.map(({ id, name }) => ({\n      text: name,\n      value: id,\n    }))\n  );\n\n  showLoader(false);\n  showSelect();\n}\n\nasync function fillCatInfo(breedId) {\n  showLoader();\n  showInfo(false);\n\n  try {\n    const { url, name, description, temperament } = await fetchCatByBreed(\n      breedId\n    );\n\n    const element = getInfoElement();\n\n    element.innerHTML = `\n          <img\n            width=\"400\"\n            src=\"${url}\"\n            alt=\"${name}\"\n          />\n          <div>\n            <h1>${name}</h1>\n            <p>\n              ${description}\n            </p>\n            <h3>Temperament</h3>\n            <p>${temperament}</p>\n          </div>`;\n\n    showInfo();\n  } catch (e) {\n    showError();\n  } finally {\n    showLoader(false);\n  }\n}\n\nfunction showElement(element, visible = true) {\n  if (visible) {\n    element.classList.remove('hidden');\n  } else {\n    element.classList.add('hidden');\n  }\n}\n\nfunction showSelect(visible) {\n  showElement(getSelectElement(), visible);\n}\n\nfunction showLoader(visible) {\n  showElement(getLoaderElement(), visible);\n}\n\nfunction showError(\n  message = 'Oops! Something went wrong! Try reloading the page!'\n) {\n  iziToast.show({\n    message,\n    color: 'red',\n    position: 'topRight',\n    timeout: false,\n  });\n}\n\nfunction showInfo(visible) {\n  showElement(getInfoElement(), visible);\n}\n\nstart();\n"],"names":["axios","CATS_API_BASE_URL","fetchBreeds","response","fetchCatByBreed","breedId","item","url","breed","start","fillBreeds","getElement","selector","element","createSelect","data","SlimSelect","fillCatInfo","getSelectElement","getLoaderElement","getInfoElement","showLoader","showSelect","breeds","showError","id","name","showInfo","description","temperament","showElement","visible","message","iziToast"],"mappings":"+vBAEAA,EAAM,SAAS,QAAQ,OAAO,aAC5B,wEAEF,MAAMC,EAAoB,+BAEnB,SAASC,GAAc,CAC5B,OAAOF,EAAM,GAAGC,UAA0B,EAAE,KAAKE,GAAYA,EAAS,IAAI,CAC5E,CAEO,SAASC,EAAgBC,EAAS,CACvC,OAAOL,EAAM,GAAGC,6BAA6CI,GAAS,EACnE,KAAKF,GAAYA,EAAS,IAAI,EAC9B,KAAKA,GAAY,CAChB,KAAM,CAACG,CAAI,EAAIH,EAEf,GAAI,CAACG,EACH,MAAM,IAAI,MAAM,SAASD,aAAmB,EAG9C,KAAM,CAAE,IAAAE,CAAK,EAAGD,EAEV,CAACE,CAAK,GAAIF,GAAA,YAAAA,EAAM,SAAU,CAAA,EAEhC,GAAI,CAACE,EACH,MAAM,IAAI,MAAM,SAASH,aAAmB,EAG9C,MAAO,CAAE,GAAGG,EAAO,IAAAD,EACzB,CAAK,CACL,CCxBA,SAASE,GAAQ,CACfC,GACF,CAEA,SAASC,EAAWC,EAAU,CAC5B,MAAMC,EAAU,SAAS,cAAcD,CAAQ,EAE/C,GAAI,CAACC,EACH,MAAM,IAAI,MAAM,WAAWD,oBAA2B,EAGxD,OAAOC,CACT,CAEA,SAASC,EAAaC,EAAM,CAC1B,IAAIC,EAAW,CACb,OAAQ,gBACR,KAAAD,EACA,OAAQ,CACN,YAAa,CAAC,CAACP,CAAK,IAAM,CACxBS,EAAYT,EAAM,KAAK,CACxB,CACF,CACL,CAAG,CACH,CAEA,SAASU,GAAmB,CAC1B,OAAOP,EAAW,iBAAiB,CACrC,CAEA,SAASQ,GAAmB,CAC1B,OAAOR,EAAW,SAAS,CAC7B,CAEA,SAASS,GAAiB,CACxB,OAAOT,EAAW,WAAW,CAC/B,CAEA,eAAeD,GAAa,CAC1BW,IACAC,EAAW,EAAK,EAEhB,MAAMC,EAAS,MAAMrB,EAAa,EAAC,MAAM,IAAM,CAC7CsB,IACAH,EAAW,EAAK,CACpB,CAAG,EAEDP,EACES,EAAO,IAAI,CAAC,CAAE,GAAAE,EAAI,KAAAC,CAAI,KAAQ,CAC5B,KAAMA,EACN,MAAOD,CACb,EAAM,CACN,EAEEJ,EAAW,EAAK,EAChBC,GACF,CAEA,eAAeL,EAAYZ,EAAS,CAClCgB,IACAM,EAAS,EAAK,EAEd,GAAI,CACF,KAAM,CAAE,IAAApB,EAAK,KAAAmB,EAAM,YAAAE,EAAa,YAAAC,CAAW,EAAK,MAAMzB,EACpDC,CACN,EAEUQ,EAAUO,IAEhBP,EAAQ,UAAY;AAAA;AAAA;AAAA,mBAGLN;AAAA,mBACAmB;AAAA;AAAA;AAAA,kBAGDA;AAAA;AAAA,gBAEFE;AAAA;AAAA;AAAA,iBAGCC;AAAA,kBAGbF,GACD,MAAC,CACAH,GACJ,QAAY,CACRH,EAAW,EAAK,CACjB,CACH,CAEA,SAASS,EAAYjB,EAASkB,EAAU,GAAM,CACxCA,EACFlB,EAAQ,UAAU,OAAO,QAAQ,EAEjCA,EAAQ,UAAU,IAAI,QAAQ,CAElC,CAEA,SAASS,EAAWS,EAAS,CAC3BD,EAAYZ,IAAoBa,CAAO,CACzC,CAEA,SAASV,EAAWU,EAAS,CAC3BD,EAAYX,IAAoBY,CAAO,CACzC,CAEA,SAASP,EACPQ,EAAU,sDACV,CACAC,EAAS,KAAK,CACZ,QAAAD,EACA,MAAO,MACP,SAAU,WACV,QAAS,EACb,CAAG,CACH,CAEA,SAASL,EAASI,EAAS,CACzBD,EAAYV,IAAkBW,CAAO,CACvC,CAEAtB,EAAO"}